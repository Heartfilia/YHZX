#!/usr/bin/env python
# -*- coding: utf-8 -*-
# @Time    : 2019/10/14 16:20
# @Author  : Lodge
import time
import json
import requests

from helper import python_config
from fake_useragent import UserAgent

base_url = 'http://hr.91job.com'
token_url = base_url + '/api/auth/jwt/hr/token'

ua = UserAgent()
session = requests.Session()

data = {
    'type': 1,
    'password': python_config.PASSWORD,
    'username': python_config.account_from
}

headers = {
    'Referer': 'http://hr.91job.com/',
    'User-Agent': ua.random,
}

# login = session.post(token_url, json=data, headers=headers)
# token2 = json.loads(login.text).get('data', None)


url2 = base_url + '/api/position/core/list?close=0&pageNo=&pageSize=10&t=1571042328'

import re

test = """{"code":0,"message":"Success","zpData":{"messages":[{"uncount":0,"flag":1,"mid":56251768116,"received":true,"cmid":0,"type":4,"body":{"type":12,"templateId":1,"headTitle":"","hyperLink":{"extraJson":"{\"highlightStart\":18,\"highlightLength\":6}","text":"对方已同意，您可至邮箱中查看和下载。未收到邮件？","hyperLinkType":6,"url":"https://m.zhipin.com/faqQuestion/detail?id=126"}},"offline":false,"pushSound":0,"from":{"uid":33692153,"headImg":0,"name":"小文","company":"","avatar":"https://img.bosszhipin.com/beijin/upload/avatar/20191012/120dc388845e3b326092cf62fecbf36916903d5de5f698202308c56c0a875e9a_s.png","source":0,"certification":0},"to":{"uid":49660662,"headImg":0,"name":"陈女士","company":"","avatar":"https://img.bosszhipin.com/beijin/mcs/useravatar/20181127/c32b3f305315703602085a1594afec1f627ffff9893bdcd9013807f5aa824ec6_s.jpg","source":0,"certification":0},"time":1571037088941,"pushText":"对方已同意，您可至邮箱中查看和下载。未收到邮件？","taskId":0,"status":2},{"uncount":0,"flag":65537,"mid":56251768184,"received":true,"cmid":0,"type":1,"body":{"type":12,"templateId":1,"headTitle":"","hyperLink":{"extraJson":"{\"fileSizeDesc\":\"296.9KB\",\"mailTip\":\"点击可预览\"}","text":"IMG_20191012_222508.jpg","hyperLinkType":1,"url":"https://m.zhipin.com/wapi/zpgeek/resume/attachment/preview4boss?id=fdee229d6a15b2021XZ42N--GVJW&type=jpg&BZPResumePreview=1&b=/resume/preview4Receiver"}},"offline":false,"pushSound":0,"from":{"uid":33692153,"headImg":0,"name":"小文","company":"","avatar":"https://img.bosszhipin.com/beijin/upload/avatar/20191012/120dc388845e3b326092cf62fecbf36916903d5de5f698202308c56c0a875e9a_s.png","source":0,"certification":0},"to":{"uid":49660662,"headImg":0,"name":"陈女士","company":"","avatar":"https://img.bosszhipin.com/beijin/mcs/useravatar/20181127/c32b3f305315703602085a1594afec1f627ffff9893bdcd9013807f5aa824ec6_s.jpg","source":0,"certification":0},"time":1571037088960,"pushText":"IMG_20191012_222508.jpg","taskId":0,"status":2},{"uncount":0,"flag":65537,"bizType":14,"mid":56251778090,"received":true,"cmid":0,"type":1,"body":{"dialog":{"backgroundUrl":"","clickMore":false,"buttons":[{"text":"同意","templateId":0,"url":"bosszp://bosszhipin.app/openwith?type=sendaction&uid=33692153&aid=41&extends={\"resumeId\":24714614,\"resumeName\":\"IMG_20191012_222508\"}"},{"text":"拒绝","templateId":0,"url":"bosszp://bosszhipin.app/openwith?type=sendaction&uid=33692153&aid=42"}],"operated":true,"statisticParameters":"","text":"对方想发送附件简历到您邮箱，您是否同意","type":2,"title":"","timeout":0,"url":""},"type":7,"templateId":1,"headTitle":""},"offline":false,"pushSound":0,"from":{"uid":33692153,"headImg":0,"name":"小文","company":"","avatar":"https://img.bosszhipin.com/beijin/upload/avatar/20191012/120dc388845e3b326092cf62fecbf36916903d5de5f698202308c56c0a875e9a_s.png","source":0,"certification":0},"to":{"uid":49660662,"headImg":0,"name":"陈女士","company":"","avatar":"https://img.bosszhipin.com/beijin/mcs/useravatar/20181127/c32b3f305315703602085a1594afec1f627ffff9893bdcd9013807f5aa824ec6_s.jpg","source":0,"certification":0},"time":1571037091499,"pushText":"小文:对方想发送附件简历到您邮箱，您是否同意","taskId":0,"status":2},{"uncount":1,"flag":1,"mid":56254855478,"received":true,"cmid":0,"type":1,"body":{"action":{"extend":"{\"resumeId\":24714614,\"resumeName\":\"IMG_20191012_222508\"}","aid":41},"type":4,"templateId":2,"headTitle":""},"offline":false,"pushSound":0,"from":{"uid":49660662,"headImg":0,"name":"陈女士","company":"","avatar":"https://img.bosszhipin.com/beijin/mcs/useravatar/20181127/c32b3f305315703602085a1594afec1f627ffff9893bdcd9013807f5aa824ec6_s.jpg","source":0,"certification":0},"to":{"uid":33692153,"headImg":0,"name":"小文","company":"","avatar":"https://img.bosszhipin.com/beijin/upload/avatar/20191012/120dc388845e3b326092cf62fecbf36916903d5de5f698202308c56c0a875e9a_s.png","source":0,"certification":0},"time":1571037898945,"taskId":0,"status":2},{"uncount":0,"flag":1,"mid":56254855598,"received":true,"cmid":0,"type":4,"body":{"type":12,"templateId":1,"headTitle":"","hyperLink":{"extraJson":"{\"highlightStart\":20,\"highlightLength\":6}","text":"对方已投递简历，您可至邮箱中查看和下载。未收到邮件？","hyperLinkType":6,"url":"https://m.zhipin.com/faqQuestion/detail?id=126"}},"offline":false,"pushSound":0,"from":{"uid":33692153,"headImg":0,"name":"小文","company":"","avatar":"https://img.bosszhipin.com/beijin/upload/avatar/20191012/120dc388845e3b326092cf62fecbf36916903d5de5f698202308c56c0a875e9a_s.png","source":0,"certification":0},"to":{"uid":49660662,"headImg":0,"name":"陈女士","company":"","avatar":"https://img.bosszhipin.com/beijin/mcs/useravatar/20181127/c32b3f305315703602085a1594afec1f627ffff9893bdcd9013807f5aa824ec6_s.jpg","source":0,"certification":0},"time":1571037898968,"pushText":"对方已投递简历，您可至邮箱中查看和下载。未收到邮件？","taskId":0,"status":2},{"uncount":0,"flag":65537,"mid":56254855723,"received":true,"cmid":0,"type":1,"body":{"type":12,"templateId":1,"headTitle":"","hyperLink":{"extraJson":"{\"fileSizeDesc\":\"296.9KB\",\"mailTip\":\"点击可预览\"}","text":"IMG_20191012_222508.jpg","hyperLinkType":1,"url":"https://m.zhipin.com/wapi/zpgeek/resume/attachment/preview4boss?id=a61e0236f5edaca31XZ42Nm-EFFW&type=jpg&BZPResumePreview=1&b=/resume/preview4Receiver"}},"offline":false,"pushSound":0,"from":{"uid":33692153,"headImg":0,"name":"小文","company":"","avatar":"https://img.bosszhipin.com/beijin/upload/avatar/20191012/120dc388845e3b326092cf62fecbf36916903d5de5f698202308c56c0a875e9a_s.png","source":0,"certification":0},"to":{"uid":49660662,"headImg":0,"name":"陈女士","company":"","avatar":"https://img.bosszhipin.com/beijin/mcs/useravatar/20181127/c32b3f305315703602085a1594afec1f627ffff9893bdcd9013807f5aa824ec6_s.jpg","source":0,"certification":0},"time":1571037898999,"pushText":"IMG_20191012_222508.jpg","taskId":0,"status":2},{"uncount":0,"flag":1,"mid":56254874376,"received":true,"cmid":1571087564606,"type":1,"body":{"text":"亲亲，方便提供一份您的简历吗？有利于我们接下来的沟通。","type":1,"templateId":1,"headTitle":""},"offline":false,"pushSound":0,"from":{"uid":49660662,"headImg":0,"name":"陈女士","company":"","avatar":"https://img.bosszhipin.com/beijin/mcs/useravatar/20181127/c32b3f305315703602085a1594afec1f627ffff9893bdcd9013807f5aa824ec6_s.jpg","source":0,"certification":0},"to":{"uid":33692153,"headImg":0,"name":"小文","company":"","avatar":"https://img.bosszhipin.com/beijin/upload/avatar/20191012/120dc388845e3b326092cf62fecbf36916903d5de5f698202308c56c0a875e9a_s.png","source":0,"certification":0},"time":1571037903995,"pushText":"陈女士:亲亲，方便提供一份您的简历吗？有利于我们接下来的沟通。","taskId":0,"status":2},{"uncount":1,"flag":1,"mid":56254892154,"received":true,"cmid":0,"type":1,"body":{"action":{"aid":37},"type":4,"templateId":2,"headTitle":""},"offline":false,"pushSound":0,"from":{"uid":49660662,"headImg":0,"name":"陈女士","company":"","avatar":"https://img.bosszhipin.com/beijin/mcs/useravatar/20181127/c32b3f305315703602085a1594afec1f627ffff9893bdcd9013807f5aa824ec6_s.jpg","source":0,"certification":0},"to":{"uid":33692153,"headImg":0,"name":"小文","company":"","avatar":"https://img.bosszhipin.com/beijin/upload/avatar/20191012/120dc388845e3b326092cf62fecbf36916903d5de5f698202308c56c0a875e9a_s.png","source":0,"certification":0},"time":1571037908881,"pushText":"陈女士想要一份您的附件简历，您是否同意？","taskId":0,"status":2},{"uncount":1,"flag":1,"mid":56254897641,"received":true,"cmid":0,"type":1,"body":{"action":{"aid":27},"type":4,"templateId":2,"headTitle":""},"offline":false,"pushSound":0,"from":{"uid":49660662,"headImg":0,"name":"陈女士","company":"","avatar":"https://img.bosszhipin.com/beijin/mcs/useravatar/20181127/c32b3f305315703602085a1594afec1f627ffff9893bdcd9013807f5aa824ec6_s.jpg","source":0,"certification":0},"to":{"uid":33692153,"headImg":0,"name":"小文","company":"","avatar":"https://img.bosszhipin.com/beijin/upload/avatar/20191012/120dc388845e3b326092cf62fecbf36916903d5de5f698202308c56c0a875e9a_s.png","source":0,"certification":0},"time":1571037910331,"pushText":"陈女士请求与您交换联系方式","taskId":0,"status":2},{"uncount":1,"flag":1,"mid":56254904601,"received":true,"cmid":0,"type":1,"body":{"action":{"aid":32},"type":4,"templateId":2,"headTitle":""},"offline":false,"pushSound":0,"from":{"uid":49660662,"headImg":0,"name":"陈女士","company":"","avatar":"https://img.bosszhipin.com/beijin/mcs/useravatar/20181127/c32b3f305315703602085a1594afec1f627ffff9893bdcd9013807f5aa824ec6_s.jpg","source":0,"certification":0},"to":{"uid":33692153,"headImg":0,"name":"小文","company":"","avatar":"https://img.bosszhipin.com/beijin/upload/avatar/20191012/120dc388845e3b326092cf62fecbf36916903d5de5f698202308c56c0a875e9a_s.png","source":0,"certification":0},"time":1571037912207,"pushText":"陈女士请求与您交换微信","taskId":0,"status":2},{"uncount":0,"flag":1,"mid":56255010906,"received":true,"cmid":1571087600975,"type":1,"body":{"text":"好的，您的简历我已收到，若是简历通过筛选，我们将会在24小时内与您进一步沟通，如果您有不清晰的地方，也可以随时联系我：linda:185-78608523(微信同号）","type":1,"templateId":1,"headTitle":""},"offline":false,"pushSound":0,"from":{"uid":49660662,"headImg":0,"name":"陈女士","company":"","avatar":"https://img.bosszhipin.com/beijin/mcs/useravatar/20181127/c32b3f305315703602085a1594afec1f627ffff9893bdcd9013807f5aa824ec6_s.jpg","source":0,"certification":0},"to":{"uid":33692153,"headImg":0,"name":"小文","company":"","avatar":"https://img.bosszhipin.com/beijin/upload/avatar/20191012/120dc388845e3b326092cf62fecbf36916903d5de5f698202308c56c0a875e9a_s.png","source":0,"certification":0},"time":1571037940363,"pushText":"陈女士:好的，您的简历我已收到，若是简历通过筛选，我们将会在24小时内与您进一步沟通，如果您有不清晰的地方，也可以随时联系我：linda...","taskId":0,"status":2},{"uncount":0,"flag":1,"mid":56255266787,"received":true,"cmid":1571038008725,"type":1,"body":{"image":{"tinyImage":{"width":300,"url":"https://img.bosszhipin.com/beijin/upload/chatphoto/20191014/829e7f086b824d6ff9c0f7c6b59fbd2616903d5de5f698202308c56c0a875e9a_s.jpg","height":461},"originImage":{"width":1078,"url":"https://img.bosszhipin.com/beijin/upload/chatphoto/20191014/829e7f086b824d6ff9c0f7c6b59fbd2616903d5de5f698202308c56c0a875e9a.jpg","height":1659}},"type":3,"templateId":1,"headTitle":""},"offline":false,"pushSound":0,"from":{"uid":33692153,"headImg":0,"name":"小文","company":"","avatar":"https://img.bosszhipin.com/beijin/upload/avatar/20191012/120dc388845e3b326092cf62fecbf36916903d5de5f698202308c56c0a875e9a_s.png","source":0,"certification":0},"to":{"uid":49660662,"headImg":0,"name":"陈女士","company":"","avatar":"https://img.bosszhipin.com/beijin/mcs/useravatar/20181127/c32b3f305315703602085a1594afec1f627ffff9893bdcd9013807f5aa824ec6_s.jpg","source":0,"certification":0},"time":1571038008273,"pushText":"小文发来一张图片","taskId":0,"status":2},{"uncount":1,"flag":1,"mid":56255292078,"received":true,"cmid":1571038015461,"type":1,"body":{"action":{"aid":33},"type":4,"templateId":1,"headTitle":""},"offline":false,"pushSound":0,"from":{"uid":33692153,"headImg":0,"name":"小文","company":"","avatar":"https://img.bosszhipin.com/beijin/upload/avatar/20191012/120dc388845e3b326092cf62fecbf36916903d5de5f698202308c56c0a875e9a_s.png","source":0,"certification":0},"to":{"uid":49660662,"headImg":0,"name":"陈女士","company":"","avatar":"https://img.bosszhipin.com/beijin/mcs/useravatar/20181127/c32b3f305315703602085a1594afec1f627ffff9893bdcd9013807f5aa824ec6_s.jpg","source":0,"certification":0},"time":1571038015022,"pushText":"小文接受与您交换微信","taskId":0,"status":2},{"uncount":0,"flag":65537,"bizType":12,"mid":56255292376,"received":true,"cmid":0,"type":1,"body":{"text":"小文的微信号：&lt;copy&gt;15806003517&lt;/copy&gt;","type":1,"templateId":5,"headTitle":""},"offline":false,"pushSound":0,"from":{"uid":33692153,"headImg":0,"name":"小文","company":"","avatar":"https://img.bosszhipin.com/beijin/upload/avatar/20191012/120dc388845e3b326092cf62fecbf36916903d5de5f698202308c56c0a875e9a_s.png","source":0,"certification":0},"to":{"uid":49660662,"headImg":0,"name":"陈女士","company":"","avatar":"https://img.bosszhipin.com/beijin/mcs/useravatar/20181127/c32b3f305315703602085a1594afec1f627ffff9893bdcd9013807f5aa824ec6_s.jpg","source":0,"certification":0},"time":1571038015097,"pushText":"小文:小文的微信号：&lt;copy&gt;15806003517&lt;/copy&gt;","taskId":0,"status":2},{"uncount":1,"flag":1,"mid":56255328297,"received":true,"cmid":1571038025037,"type":1,"body":{"action":{"extend":"%7B%22resumeId%22%3A24714614%2C%22messageId%22%3A%2256254892193%22%2C%22resultType%22%3A%220%22%7D","aid":38},"type":4,"templateId":1,"headTitle":""},"offline":false,"pushSound":0,"from":{"uid":33692153,"headImg":0,"name":"小文","company":"","avatar":"https://img.bosszhipin.com/beijin/upload/avatar/20191012/120dc388845e3b326092cf62fecbf36916903d5de5f698202308c56c0a875e9a_s.png","source":0,"certification":0},"to":{"uid":49660662,"headImg":0,"name":"陈女士","company":"","avatar":"https://img.bosszhipin.com/beijin/mcs/useravatar/20181127/c32b3f305315703602085a1594afec1f627ffff9893bdcd9013807f5aa824ec6_s.jpg","source":0,"certification":0},"time":1571038024575,"taskId":0,"status":2},{"uncount":0,"flag":1,"mid":56255328504,"received":true,"cmid":0,"type":4,"body":{"type":12,"templateId":1,"headTitle":"","hyperLink":{"extraJson":"{\"highlightStart\":18,\"highlightLength\":6}","text":"对方已同意，您可至邮箱中查看和下载。未收到邮件？","hyperLinkType":6,"url":"https://m.zhipin.com/faqQuestion/detail?id=126"}},"offline":false,"pushSound":0,"from":{"uid":33692153,"headImg":0,"name":"小文","company":"","avatar":"https://img.bosszhipin.com/beijin/upload/avatar/20191012/120dc388845e3b326092cf62fecbf36916903d5de5f698202308c56c0a875e9a_s.png","source":0,"certification":0},"to":{"uid":49660662,"headImg":0,"name":"陈女士","company":"","avatar":"https://img.bosszhipin.com/beijin/mcs/useravatar/20181127/c32b3f305315703602085a1594afec1f627ffff9893bdcd9013807f5aa824ec6_s.jpg","source":0,"certification":0},"time":1571038024626,"pushText":"对方已同意，您可至邮箱中查看和下载。未收到邮件？","taskId":0,"status":2},{"uncount":0,"flag":65537,"mid":56255328580,"received":true,"cmid":0,"type":1,"body":{"type":12,"templateId":1,"headTitle":"","hyperLink":{"extraJson":"{\"fileSizeDesc\":\"296.9KB\",\"mailTip\":\"点击可预览\"}","text":"IMG_20191012_222508.jpg","hyperLinkType":1,"url":"https://m.zhipin.com/wapi/zpgeek/resume/attachment/preview4boss?id=59ddd37d739c79e31XZ42Nm7FVRT&type=jpg&BZPResumePreview=1&b=/resume/preview4Receiver"}},"offline":false,"pushSound":0,"from":{"uid":33692153,"headImg":0,"name":"小文","company":"","avatar":"https://img.bosszhipin.com/beijin/upload/avatar/20191012/120dc388845e3b326092cf62fecbf36916903d5de5f698202308c56c0a875e9a_s.png","source":0,"certification":0},"to":{"uid":49660662,"headImg":0,"name":"陈女士","company":"","avatar":"https://img.bosszhipin.com/beijin/mcs/useravatar/20181127/c32b3f305315703602085a1594afec1f627ffff9893bdcd9013807f5aa824ec6_s.jpg","source":0,"certification":0},"time":1571038024645,"pushText":"IMG_20191012_222508.jpg","taskId":0,"status":2},{"uncount":1,"flag":1,"mid":56255335963,"received":true,"cmid":1571038027098,"type":1,"body":{"action":{"aid":28},"type":4,"templateId":1,"headTitle":""},"offline":false,"pushSound":0,"from":{"uid":33692153,"headImg":0,"name":"小文","company":"","avatar":"https://img.bosszhipin.com/beijin/upload/avatar/20191012/120dc388845e3b326092cf62fecbf36916903d5de5f698202308c56c0a875e9a_s.png","source":0,"certification":0},"to":{"uid":49660662,"headImg":0,"name":"陈女士","company":"","avatar":"https://img.bosszhipin.com/beijin/mcs/useravatar/20181127/c32b3f305315703602085a1594afec1f627ffff9893bdcd9013807f5aa824ec6_s.jpg","source":0,"certification":0},"time":1571038026678,"pushText":"小文接受与您交换联系方式","taskId":0,"status":2},{"uncount":0,"flag":65537,"bizType":11,"mid":56255336258,"received":true,"cmid":0,"type":1,"body":{"text":"小文的手机号：&lt;phone&gt;15806003517&lt;/phone&gt;","type":1,"templateId":5,"headTitle":""},"offline":false,"pushSound":0,"from":{"uid":33692153,"headImg":0,"name":"小文","company":"","avatar":"https://img.bosszhipin.com/beijin/upload/avatar/20191012/120dc388845e3b326092cf62fecbf36916903d5de5f698202308c56c0a875e9a_s.png","source":0,"certification":0},"to":{"uid":49660662,"headImg":0,"name":"陈女士","company":"","avatar":"https://img.bosszhipin.com/beijin/mcs/useravatar/20181127/c32b3f305315703602085a1594afec1f627ffff9893bdcd9013807f5aa824ec6_s.jpg","source":0,"certification":0},"time":1571038026757,"pushText":"小文:小文的手机号：&lt;phone&gt;15806003517&lt;/phone&gt;","taskId":0,"status":2},{"uncount":0,"flag":1,"mid":56287661559,"received":true,"cmid":1571098280767,"type":1,"body":{"text":"好的，您的简历我已收到，若是简历通过筛选，我们将会在24小时内与您进一步沟通，如果您有不清晰的地方，也可以随时联系我：linda:185-78608523(微信同号）","type":1,"templateId":1,"headTitle":""},"offline":false,"pushSound":0,"from":{"uid":49660662,"headImg":0,"name":"陈女士","company":"","avatar":"https://img.bosszhipin.com/beijin/mcs/useravatar/20181127/c32b3f305315703602085a1594afec1f627ffff9893bdcd9013807f5aa824ec6_s.jpg","source":0,"certification":0},"to":{"uid":33692153,"headImg":0,"name":"小文","company":"","avatar":"https://img.bosszhipin.com/beijin/upload/avatar/20191012/120dc388845e3b326092cf62fecbf36916903d5de5f698202308c56c0a875e9a_s.png","source":0,"certification":0},"time":1571048620152,"pushText":"陈女士:好的，您的简历我已收到，若是简历通过筛选，我们将会在24小时内与您进一步沟通，如果您有不清晰的地方，也可以随时联系我：linda...","taskId":0,"status":1}],"type":1}}"""

# print(str(test))


info = re.findall(r'"pushText":"(.*?)"', test)
print(info)
