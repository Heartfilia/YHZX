### 交接文档B ==> Hr部分

---

### HR数据相关的文档

---

**【注意以下Boss部分是需要 首次>>手动<<替换cookie】 **

#####  == 4 == 恒信人才网

######  账号所属分类表

| 文件夹名  | 英文名 | 所属者 | 账号  | 端口  | 密码           | 公司                         |
| --------- | ------ | ------ | ----- | ----- | -------------- | ---------------------------- |
| `Hengxin` | `vera` | 赵一菲 | milky | 19191 | `milkyway2016` | `义乌市兴禾网络科技有限公司` |

###### 主要功能分类

- 职位刷新，主动投递，主动下载

  - 脚本： `requests_91job.py`
  - 说明： 因为采用了session登录，所以第一步都是拿token，这个脚本包含了上述所有功能。
  - 注意： 为了区别主要的信息来源，所以很多地方是做了多种类似处理，如下

  ```python
  def transfer_useful(self, json_info, flag=None, inner=None, position_name=None):
      # flag 的状态量 True 的话是    下载的简历
      #             None(默认值)    主动投递的简历
      #             False          搜索的简历
      #             xxx            程序下载的简历
      data = json.loads(json_info).get('data').get('resume')
      name = data.get('name', None)
  **********************************************************************************
  def get_each_resume(self, resume_id, position_id, position_name, token, flag=None, inner=None):
      # flag 标志量 默认是空进行普通的下载简历和主动投递
      #            True 的时候是通过内部状态下载的简历
      ********************
      if flag:
          *********************
          self.transfer_useful(each_one_resume.text, 'DOWN', inner)    # 这里是程序下载的简历
      else:
          if position_id:
              ******************
              self.transfer_useful(each_one_resume.text, position_name=position_name)               # 这里是主动投递的简历
          else:
              *******************
              self.transfer_useful(each_one_resume.text, True)         # 这里是主动下载的简历
  ```

  上面程序中出现多种判断值来处理不同的效果，所以要对准好

- 搜索简历

  - 脚本： `requests_search.py`
  - 说明： 这里是主动搜索简历，具体要搜什么职位的信息在配置文件里面的列表里面写上就好了，很容易重复，所以无所谓的。

- 下载简历和发送邀约

  - 脚本： `requests_send_msg.py`
  - 说明：这边是每两分钟循环启动程序，如果某次出问题了，可能会卡住，需要重启程序。
  - 注意：发送短信，目前必须用上面搜索简历生成的格式的简历id内容 `91_{ex_id}_({phone_num}`

- **程序启动**

  - 这边采用第二屏启动脚本，利用`vscode`启动：打开`VSC`的终端 >>> 定位到 `spider >> crawl.py`然后采用`python crawl.py`来启动，建议用 `VSC`，用终端启动经常内容会卡住。



---

---

##### == 5 == Boss招聘

###### 账号所属分类表

| 文件夹名             | 英文名     | 所属者 | 账号        | 端口  | 公司名                     |
| -------------------- | ---------- | ------ | ----------- | ----- | -------------------------- |
| `Boss_dqdz_sarah`    | `sarah`    | 黄禧   | 18589204384 | 55088 | 多趣电子商务有限公司       |
| `Boss_llfs_linda`    | `linda`    | 陈淼灵 | 18578608523 | 8055  | 洛洛服饰有限公司           |
| `Boss_mddz_nicole`   | `nicole`   | 邓琦   | 18578608763 | 55087 | 美豆电子商务有限责任公司   |
| `Boss_skm_laurinda`  | `laurinda` | 廖淑颖 | 17620876419 | 55084 | 时刻美电子商务有限责任公司 |
| `Boss_ssm_nicole`    | `nicole`   | 邓琦   | 13268249379 | 5508  | 时时美商务有限公司         |
| `Boss_wbdz_ling`     | `ling`     | 杨国玲 | 18578608256 | 55082 | 外宝电子商务有限公司       |
| `Boss_xhwl_yw`       | `vera`     | 赵一菲 | 17357976823 | 55085 | 义乌=兴禾网络科技有限公司  |
| `Boss_yhzx_shelly`   | `shelly`   | 张子珏 | 18529123527 | 55081 | 银河在线饰品               |
| `Boss_ymrj_laurinda` | `laurinda` | 廖淑颖 | 18578608293 | 55086 | 由美软件科技有限责任公司   |

###### 主要功能分类

- `python_config.py`： 主要的配置文件，替换cookie

  - 这里面有几个信息可以不管： `TOKEN`里面的内容可以忽略，浏览器上面复制的，没有实际效果
  - 手机号： 因为boss会做敏感校验，所以换了个特殊的字体，这个字体就用服务器自带的微软输入法，打入数字就能看到这个格式的数据
  - 启动浏览器：就复制里面写好的端口和文件路径启动就好了，注意**端口**和**文件保存路径**需要修改
  - **新增账号**：复制一份文件，然后修改文件夹名至浅显易懂，然后修改配置文件上面的启动浏览器的一些相关信息，然后启动就好了

- `Selenium_call_find.py` ：这里是主动聊天

  - 每天9点开始启动，每半小时启动一次。

  - 这里面开始是包含了4个功能，不过目前**只需要启动聊天的功能**就好了，这边要是报错，可能是部分元素定位出了问题，修改指定位置的信息就好了。
  - 这里面聊天的判断逻辑，目前来说没有太大的问题，简历上传的标准必须满足下面两个条件
    - 别人回了交换手机号
    - 别人回了简历信息

- `Selenium_position.py`：这里是发布职位

  - 每天晚上23点跑一次，但是应该账号都被Hr挤下去了，所以报错很正常
  - 这边可以手动执行，然后检测职位发布信息看着哪一步会出问题，之前没有问题，不过很久没有启动过了，可能会出问题

- **注意**

  - 百度OCR调整
    - 客户端修改位置： `Baidu_ocr >>> client.py` 上面三条信息就是你自己的百度的图像识别信息
    - 模式： `client.basicAccurate()`这个位置修改模式，目前是高精度模式，每天500次免费
    - 图像识别：因为每次只能处理一条简历，所以图片就是同一级目录下的 `base.png`反复擦写识别

  - 这边因为是只能一个电脑端登录，所以经常会被Hr挤下去，要是拿不到数据就算了，Hr会让你帮忙挂着的，一般这种你登录上线就好了，不用替换cookie，然后重启一下程序就好了。
  - 这边的OCR采用的是我的账号，目前是免费的识别只有每天500次，所以超了的话可能就会失败，程序有截图顺道上传到HR后台，程序报错的情况有两种。
    - 第一种被挤下去： 忽略，然后重启
    - 第二种是位置错误：会报错，不用管，过一会启动程序又可以拿数据了。

- 启动程序

  - 这边建议用`Pycharm`然后启动`spider >>> crawl.py`就好了

###### 添加账号

- 复制文件夹  >>>  修改名字  >>> 修改配置文件 >>> Hr登录上就可以接管了 
  - **记住**：本地浏览器 >> 你一定要保存密码，要不然经常被hr挤下去很痛苦的



---

最后一句话：

建议每天早上来的时候手动检查一下程序，把以下程序手动启动：

- 前程无忧
- boss那些被挤下去的

其他的也可以看一看，然后再根据相关的报错去处理

